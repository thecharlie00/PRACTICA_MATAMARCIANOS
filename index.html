<!doctype html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8" />
    <title>Marcianitos</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.55.2/phaser.min.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>
<body>

<script type="text/javascript">

let game_w = 800;
let game_h = 600;
let enemySpeed = 1;

let config = {
    type: Phaser.AUTO,
    width: game_w,
    height: game_h,
    physics: {
        default: 'arcade',
        arcade: {
            
            debug: false
        }
    },
    scene: {
        preload: preload,
        create: create,
        update: update
    }
};


let player;
let cursors;
let lives = 3;
let score = 0;
let gameOver = false;
let scoreText;
let game = new Phaser.Game(config);
let laser;
let alien;
let alien_2;
let alien_3;
let alien_4;




function preload ()
{
    this.load.image('Sky', 'Galaxia.jpg');
    this.load.image('Nave', 'Nave.png', { frameWidth: 70, frameHeight: 48 });
    this.load.image('Bullet','laser.png');
    this.load.image('Marciano','marciano.png');
}


function create ()
{
    
    this.add.image(400, 300, 'Sky');
    
	alien = this.add.image(890, 150, "Marciano");
	alien_2 = this.add.image(1850, 300, "Marciano");
	alien_3 = this.add.image(1350, 450, "Marciano");
	alien_4 = this.add.image(2000, 600, "Marciano");

	laser = this.add.image(65,60, "Bullet");

	player = this.add.image(60, 60, "Nave");

	this.physics.add.existing(alien, false);
	this.physics.add.existing(alien_2, false);
	this.physics.add.existing(alien_3, false);
  // this.physics.add.exiting(alien_4, false);

	this.physics.add.existing(player, false);
	this.physics.add.existing(laser, false);	

    
	let aliens = [alien,alien_2,alien_3,alien_4];
    
	for(let i = 0;  i < aliens.length; i++){
		
		this.physics.add.collider(player, aliens[i], function(player, aliens){
			lives--;
			lives_text.text = lives.toString();
		
		});

	}

    this.add.text(game_w/2 - 350, 54, "Lives:  ");
	lives_text = this.add.text(game_w/2 - 350+64, 54, "3");
	this.add.text(game_w/2 - 350, 70, "Points:  ");
	score_text = this.add.text(game_w/2 - 350+68, 70, "0");
	
    
    cursors = this.input.keyboard.createCursorKeys();

    
    

    
}



function update (time, delta)
{
    if (gameOver)
    {
        return;
    }

    if (cursors.up.isDown && player.y > game_h  - 560)
    {
        player.y -= 25;
		laser.y -= 25;


    }
    else if (cursors.down.isDown && player.y < game_h  - 40)
    {
        player.y += 25;
		laser.y += 25;
    }

	let speedBullet = 1;

	laser.x += speedBullet * delta;

	if(cursors.right.isDown){
		laser.x = 20;
	}
				
	alien.x -= 5;
	alien_2.x -= 5;
	alien_3.x -= 5;

	
    


}


</script>
<canvas widht="800" height="600">
</body>
</html>
